@model IEnumerable<MonthlyClaimSystem.Models.Claim>
@{
    Layout = "_Layout";
    ViewData["Title"] = "HR – Claims Report";
}

<h2 class="mb-4">HR – Claims Report</h2>

<!-- Filter Form -->
<form asp-action="Claims" asp-controller="HR" method="get" class="row g-3 mb-4">
    <div class="col-md-3">
        <label class="form-label">Verify Status</label>
        <select name="verifyStatus" class="form-select">
            <option value="">Any</option>
            <option value="Pending">Pending</option>
            <option value="Verified">Verified</option>
            <option value="Rejected">Rejected</option>
        </select>
    </div>

    <div class="col-md-3">
        <label class="form-label">Approve Status</label>
        <select name="approveStatus" class="form-select">
            <option value="">Any</option>
            <option value="Pending">Pending</option>
            <option value="Approved">Approved</option>
            <option value="Rejected">Rejected</option>
        </select>
    </div>

    <div class="col-md-3">
        <label class="form-label">Lecturer</label>
        <input type="text" name="lecturer" class="form-control" />
    </div>

    <div class="col-md-3">
        <label class="form-label">From Date</label>
        <input type="date" name="fromDate" class="form-control" />
    </div>

    <div class="col-md-3">
        <label class="form-label">To Date</label>
        <input type="date" name="toDate" class="form-control" />
    </div>

    <div class="col-md-3">
        <label class="form-label">Min Amount</label>
        <input type="number" step="0.01" name="minAmount" class="form-control" />
    </div>

    <div class="col-md-3">
        <label class="form-label">Max Amount</label>
        <input type="number" step="0.01" name="maxAmount" class="form-control" />
    </div>

    <div class="col-md-3">
        <label class="form-label">Min Rate</label>
        <input type="number" step="0.01" name="minRate" class="form-control" />
    </div>

    <div class="col-md-3">
        <label class="form-label">Max Rate</label>
        <input type="number" step="0.01" name="maxRate" class="form-control" />
    </div>

    <div class="col-12">
        <button type="submit" class="btn btn-primary">Apply Filters</button>
        <a asp-action="ExportCsv" asp-controller="HR" class="btn btn-outline-secondary ms-2">Download CSV</a>
        <a asp-action="ExportExcel" asp-controller="HR" class="btn btn-outline-secondary ms-2">Download Excel (TSV)</a>
    </div>
</form>

<!-- Results Table -->
<table class="table table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th>Claim ID</th>
            <th>Lecturer</th>
            <th>Hours</th>
            <th>Rate</th>
            <th>Total</th>
            <th>Verify Status</th>
            <th>Approve Status</th>
            <th>Claim Date</th>
            <th>Submitted</th>
            <th>Verified On</th>
            <th>Approved On</th>
            <th>Notes</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var r in Model)
        {
            <tr>
                <td>@r.ClaimId</td>
                <td>@r.Employee.EmployeeName</td>
                <td>@r.HoursWorked</td>
                <td>@r.HourlyRate</td>
                <td>@r.TotalPayment</td>
                <td>@r.VerifyStatus</td>
                <td>@r.ApproveStatus</td>
                <td>@r.ClaimDate.ToShortDateString()</td>
                <td>@r.DateSubmitted.ToShortDateString()</td>
                <td>@r.VerifiedOn?.ToString("g")</td>
                <td>@r.ApprovedOn?.ToString("g")</td>
                <td>@r.Notes</td>
            </tr>
        }
    </tbody>
</table>